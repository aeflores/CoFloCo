
Preprocessing Cost Relations
=====================================

#### Computed strongly connected components 
0. recursive  : [concat/3]
1. recursive  : [lessleaves/3]
2. non_recursive  : [start/2]

#### Obtained direct recursion through partial evaluation 
0. SCC is partially evaluated into concat/3
1. SCC is partially evaluated into lessleaves/3
2. SCC is partially evaluated into start/2

Control-Flow Refinement of Cost Relations
=====================================

### Specialization of cost equations concat/3 
* CE 5 is refined into CE [9] 
* CE 4 is refined into CE [10] 


#### Refined cost equations concat/3 
* CE 9: concat(V2,V1,Out) = 1+ concat(W2,V1,X2)
     [V2+X2>=Out,Out>=X2+1,V1>=0,V2+X2=Out+W2] 
* CE 10: concat(A,B,B) = 1
     [B>=0,A=0] 

### Cost equations --> "Loop" of concat/3 
* CEs [10] --> Loop 7 
* CEs [9] --> Loop 8 

#### Loops of concat/3 
* Loop 7: concat(A,B,B) [B>=0,A=0] 
* Loop 8: concat(V2,V1,Out)->  concat(V2',V1,Out')
                  [V2+Out'>=Out,Out>=Out'+1,V1>=0,V2+Out'=Out+V2'] 

### Ranking functions of CR concat(V2,V1,Out) 
* RF of phase [8]: [V2]

#### Partial ranking functions of CR concat(V2,V1,Out) 
* Partial RF of phase [8]:
  - RF of loop [8:1]:
    V2


### Resulting Chains:concat(V2,V1,Out) 
* [[8],7]
* [7]


### Merging Chains  concat/3 into  External patterns of execution 
* [[7]] --> 1 
* [[7,[8]]] --> 2 


### Specialization of cost equations lessleaves/3 
* CE 8 is refined into CE [11,12,13,14] 
* CE 6 is refined into CE [15] 
* CE 7 is refined into CE [16] 


#### Refined cost equations lessleaves/3 
* CE 11: lessleaves(V2,V1,Out) = 1+ concat(W2,X2,X2):1+ concat(Y2,Z2,Z2):1+ lessleaves(X2,Z2,Out)
     [Z2>=0,X2>=0,Z2+1=V1,X2+1=V2,Y2=0,W2=0] 
* CE 12: lessleaves(V2,V1,Out) = 1+ concat(W2,X2,X2):1+ concat(Y2,Z2,A3):2+ lessleaves(X2,A3,Out)
     [A3>=Y2,Y2>=1,X2>=0,A3=Y2+Z2,A3+1=V1,X2+1=V2,W2=0] 
* CE 13: lessleaves(V2,V1,Out) = 1+ concat(W2,X2,Y2):2+ concat(Z2,A3,A3):1+ lessleaves(Y2,A3,Out)
     [Y2>=W2,A3>=0,W2>=1,Y2=W2+X2,A3+1=V1,Y2+1=V2,Z2=0] 
* CE 14: lessleaves(V2,V1,Out) = 1+ concat(W2,X2,Y2):2+ concat(Z2,A3,B3):2+ lessleaves(Y2,B3,Out)
     [B3>=Z2,Y2>=W2,Z2>=1,W2>=1,B3=Z2+A3,Y2=W2+X2,B3+1=V1,Y2+1=V2] 
* CE 15: lessleaves(V2,V1,Out) = 1
     [V2>=0,Out=0,V1=0] 
* CE 16: lessleaves(V2,V1,Out) = 1
     [V1>=1,Out=1,V2=0] 

### Cost equations --> "Loop" of lessleaves/3 
* CEs [15] --> Loop 9 
* CEs [16] --> Loop 10 
* CEs [11,12,13,14] --> Loop 11 

#### Loops of lessleaves/3 
* Loop 9: lessleaves(V2,V1,Out) [V2>=0,Out=0,V1=0] 
* Loop 10: lessleaves(V2,V1,Out) [V1>=1,Out=1,V2=0] 
* Loop 11: lessleaves(V2,V1,Out)->  lessleaves(V2',V1',Out)
                  [V1>=1,V2>=1,V1=V1'+1,V2=V2'+1] 

### Ranking functions of CR lessleaves(V2,V1,Out) 
* RF of phase [11]: [V1,V2]

#### Partial ranking functions of CR lessleaves(V2,V1,Out) 
* Partial RF of phase [11]:
  - RF of loop [11:1]:
    V1
    V2


### Resulting Chains:lessleaves(V2,V1,Out) 
* [[11],10]
* [[11],9]
* [10]
* [9]


### Merging Chains  lessleaves/3 into  External patterns of execution 
* [[10]] --> 1 
* [[9]] --> 2 
* [[9,[11]]] --> 3 
* [[10,[11]]] --> 4 


### Specialization of cost equations start/2 
* CE 2 is refined into CE [17,18] 
* CE 3 is refined into CE [19,20,21,22] 


#### Refined cost equations start/2 
* CE 17: start(V2,V1) = 0+ concat(W2,V1,V1):1
     [V1>=0,W2=0,V2=0] 
* CE 18: start(V2,V1) = 0+ concat(V2,W2,X2):2
     [X2>=V2,V2>=1,X2=V2+W2,X2=V2+V1] 
* CE 19: start(V2,V1) = 0+ lessleaves(W2,V1,X2):1
     [V1>=1,X2=1,W2=0,V2=0] 
* CE 20: start(V2,V1) = 0+ lessleaves(V2,W2,X2):2
     [V2>=0,X2=0,W2=0,V1=0] 
* CE 21: start(V2,V1) = 0+ lessleaves(V2,V1,W2):3
     [V2>=V1,V1>=1,W2=0] 
* CE 22: start(V2,V1) = 0+ lessleaves(V2,V1,W2):4
     [V1>=V2+1,V2>=1,W2=1] 

### Cost equations --> "Loop" of start/2 
* CEs [18,21,22] --> Loop 12 
* CEs [20] --> Loop 13 
* CEs [17,19] --> Loop 14 

#### Loops of start/2 
* Loop 12: start(V2,V1) [V1>=0,V2>=1] 
* Loop 13: start(V2,V1) [V2>=0,V1=0] 
* Loop 14: start(V2,V1) [V1>=0,V2=0] 

### Ranking functions of CR start(V2,V1) 

#### Partial ranking functions of CR start(V2,V1) 


### Resulting Chains:start(V2,V1) 
* [14]
* [13]
* [12]


### Merging Chains  start/2 into  External patterns of execution 
* [[14]] --> 1 
* [[13]] --> 2 
* [[12]] --> 3 


Computing Bounds
=====================================

#### Cost of loops [8] 

 * loop 8:concat(V2,V1,Out) -> [concat(V2',V1',Out')] 
1
#### Cost of phase [8]:concat(V2,V1,Out) -> [concat(V2',V1',Out')] 
1*it(8)+0
  Such that:it(8) =< V2
it(8) =< V2-V2'

#### Cost of chains of concat(V2,V1,Out):
* Chain [[8],7]: 1*it(8)+1
  Such that:it(8) =< -V1+Out

  with precondition: [V1+V2=Out,V2>=1,V1>=0] 

* Chain [7]: 1
  with precondition: [V2=0,V1=Out,V1>=0] 


#### Cost of loops [11] 

 * loop 11:lessleaves(V2,V1,Out) -> [lessleaves(V2',V1',Out')] 
2*s(8)+2*s(7)+3
  Such that:s(5) =< V2'
s(6) =< V1'
s(7) =< s(5)
s(8) =< s(6)

#### Cost of phase [11]:lessleaves(V2,V1,Out) -> [lessleaves(V2',V1',Out')] 
3*it(11)+2*s(9)+2*s(10)+0
  Such that:it(11) =< V2-V2'
it(11) =< V1-V1'
aux(5) =< V2
aux(6) =< V1
it(11) =< aux(5)
it(11) =< aux(6)
s(11) =< it(11)*aux(6)
s(12) =< it(11)*aux(5)
s(10) =< s(12)
s(9) =< s(11)

#### Cost of phase [11]:lessleaves(V2,V1,Out) -> [lessleaves(V2',V1',Out')] 
3*it(11)+2*s(9)+2*s(10)+0
  Such that:it(11) =< V2-V2'
it(11) =< V1-V1'
aux(5) =< V2
aux(6) =< V1
it(11) =< aux(5)
it(11) =< aux(6)
s(11) =< it(11)*aux(6)
s(12) =< it(11)*aux(5)
s(10) =< s(12)
s(9) =< s(11)

#### Cost of chains of lessleaves(V2,V1,Out):
* Chain [[11],10]: 3*it(11)+2*s(9)+2*s(10)+1
  Such that:aux(6) =< V1
aux(7) =< V2
it(11) =< aux(7)
it(11) =< aux(6)
s(11) =< it(11)*aux(6)
s(12) =< it(11)*aux(7)
s(10) =< s(12)
s(9) =< s(11)

  with precondition: [Out=1,V2>=1,V1>=V2+1] 

* Chain [[11],9]: 3*it(11)+2*s(9)+2*s(10)+1
  Such that:aux(5) =< V2
aux(8) =< V1
it(11) =< aux(8)
it(11) =< aux(5)
s(11) =< it(11)*aux(8)
s(12) =< it(11)*aux(5)
s(10) =< s(12)
s(9) =< s(11)

  with precondition: [Out=0,V1>=1,V2>=V1] 

* Chain [10]: 1
  with precondition: [V2=0,Out=1,V1>=1] 

* Chain [9]: 1
  with precondition: [V1=0,Out=0,V2>=0] 


#### Cost of chains of start(V2,V1):
* Chain [14]: 1
  with precondition: [V2=0,V1>=0] 

* Chain [13]: 1
  with precondition: [V1=0,V2>=0] 

* Chain [12]: 1*s(13)+6*s(16)+4*s(19)+4*s(20)+1
  Such that:aux(9) =< V2
aux(10) =< V1
s(13) =< aux(9)
s(16) =< aux(10)
s(16) =< aux(9)
s(17) =< s(16)*aux(10)
s(18) =< s(16)*aux(9)
s(19) =< s(18)
s(20) =< s(17)

  with precondition: [V2>=1,V1>=0] 


Closed-form bounds of start(V2,V1): 
-------------------------------------
* Chain [14] with precondition: [V2=0,V1>=0] 
    - Upper bound: 1 
    - Complexity: constant 
* Chain [13] with precondition: [V1=0,V2>=0] 
    - Upper bound: 1 
    - Complexity: constant 
* Chain [12] with precondition: [V2>=1,V1>=0] 
    - Upper bound: V2+1+4*V2*V1+6*V1+4*V1*V1 
    - Complexity: n^2 

### Maximum cost of start(V2,V1): 4*V2*V1+V2+6*V1+4*V1*V1+1 
Asymptotic class: n^2 

Time statistics: 
-------------------------------------
* Partial evaluation computed in 17 ms.
* Invariants computed in 43 ms.
   - Backward Invariants 23 ms.
   - Transitive Invariants 7 ms.
* Refinement performed in 97 ms.
* Termination proved in 11 ms.
* Upper bounds computed in 137 ms.
   - Equation cost structures 52 ms.
   - Phase cost structures 70 ms.
   - Chain cost structures 29 ms.
   - Solving cost expressions 2 ms.
* Total analysis performed in 347 ms.

